<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <title>Quadruple Jeopardy!</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="normalize.css" rel="stylesheet">
    <link href="main.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
    <div id="pageWrapper">
        <div id="board">
            <ul class="category">
                <li class="category-name" id="category-name-0"></li>

                <li class="clue-tile show-amount" data-category-index="0"><span class="amount">$200</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"></span><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="1"><span class="amount">$400</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="2"><span class="amount">$600</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="3"><span class="amount">$800</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="4"><span class="amount">$1000</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>
            </ul>
            <ul class="category">
                <li class="category-name" id="category-name-1"></li>

                <li class="clue-tile show-amount" data-category-index="0"><span class="amount">$200</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="1"><span class="amount">$400</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="2"><span class="amount">$600</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="3"><span class="amount">$800</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="4"><span class="amount">$1000</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>
            </ul>
            <ul class="category">
                <li class="category-name" id="category-name-2"></li>

                <li class="clue-tile show-amount" data-category-index="0"><span class="amount">$200</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="1"><span class="amount">$400</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="2"><span class="amount">$600</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="3"><span class="amount">$800</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="4"><span class="amount">$1000</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>
            </ul>
            <ul class="category">
                <li class="category-name" id="category-name-3"></li>

                 <li class="clue-tile show-amount" data-category-index="0"><span class="amount">$200</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="1"><span class="amount">$400</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="2"><span class="amount">$600</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="3"><span class="amount">$800</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="4"><span class="amount">$1000</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>
            </ul>
            <ul class="category">
                <li class="category-name" id="category-name-4"></li>

                <li class="clue-tile show-amount" data-category-index="0"><span class="amount">$200</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="1"><span class="amount">$400</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="2"><span class="amount">$600</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="3"><span class="amount">$800</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>

                <li class="clue-tile show-amount" data-category-index="4"><span class="amount">$1000</span><span class="clue"></span><span class="clueAndAnswer"></span><span class="answer"><span class="incorrect1" style="display:none"></span><span class="incorrect2" style="display:none"></span><span class="incorrect3" style="display:none"></span></li>
            </ul>
        </div><a href="#" id="reset">Reset the game?</a>
    </div>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>

    <script>

    var totalMoney = [];

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

    var ajaxArray=[];
    
    function fetch(smth,listNum) {
          
         // console.log("id name in fetch outside of loop" +idname);  

            var thisCategory = $(".category").eq(listNum) 
            console.log(thisCategory);

            for (var i=0; i<=4; i++){

            //console.log("category name is "+ smth.results[i].category )
            //idname = "#category-name-"+i;
            //console.log("id name in fetch loop" +idname);
              $(".clue", thisCategory).eq(i).html(smth.results[i].question);
             // console.log("clue is " + smth.results[i].question)
              $(".answer", thisCategory).eq(i).html(smth.results[i].correct_answer);
                
                // $(".incorrect1", thisCategory).eq(i).html("<button>" + smth.results[i].incorrect_answers[0]+ "</button>");
                // $(".incorrect2", thisCategory).eq(i).html("<button>" + smth.results[i].incorrect_answers[1]+ "</button>");
                // $(".incorrect3", thisCategory).eq(i).html("<button>" + smth.results[i].incorrect_answers[2]+ "</button>");

                var thisClue = smth.results[i].question;
                var correct = $('<br><br><button type="button" class="btn btn-info btn-lg correct" id="correct">' + smth.results[i].correct_answer + '</button>');
                var inc1 = $('<br><br><button type="button" class="btn btn-info btn-lg incorrect" id="inc1">' + smth.results[i].incorrect_answers[0]+ '</button>');
                var inc2 = $('<br><br><button type="button" class="btn btn-info btn-lg incorrect" id="inc2">' + smth.results[i].incorrect_answers[1]+ '</button>');
                var inc3 = $('<br><br><button type="button" class="btn btn-info btn-lg incorrect" id="inc3">' + smth.results[i].incorrect_answers[2]+ '</button>');

                var choices = [correct,inc1,inc2,inc3];

                choices = shuffle(choices);
                
                $(".clueAndAnswer", thisCategory).eq(i).append(thisClue,choices[0], choices[1], choices[2], choices[3]);

                               
            }
    }
    $(function () {

        var catArray = [9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32];

        for(var h=0; h<=4; h++){

            var catIndex = Math.floor(Math.random() * catArray.length)

            var categoryNo = catArray.splice(catIndex,1);
           console.log("at time of random number for loop: " +categoryNo);
           console.log(catArray.length);
             var idname = "#category-name-"+h;
             //var idname200= "#"
             //$(idname).text(getResults.results[0].category);

            //$(".category-name").eq(i).text(smth.results[0].category);
            //console.log("id name is " +idname);

            
        
            $.ajax({
                url: 'https://opentdb.com/api.php?amount=5&category=' + categoryNo + '&type=multiple',
                method: "GET",
                idname: idname,
                listNum: h,
               // idname200: idname200,
                success: function (getResults) {
                    //$(idname).text(getResults.results[0].category);
                    //idname = "#category-name-"+h;
                   console.log("id name in ajax " +this.idname);
                   // console.log(idname200);
                   fetch(getResults,this.listNum);
                    ajaxArray.push(getResults);
                    $(this.idname).text(getResults.results[0].category); 
                }
            });
           // console.log(ajaxArray);
        }    
    });

function clickAmount (el) {
   //el.className = 'clue-tile show-clue';
  el.className = 'clue-tile show-clueAndAnswer';
  //console.log("haereaj");
}

function clickClue (el) {
  el.className = 'clue-tile show-answer';
}

function clickAnswer (el) {
  var index = parseInt(el.getAttribute('data-category-index'), 10);
  var category = el.getAttribute('data-category');

  //GAME_STATE[category][index].revealed = true;

 // saveGameState();

  el.className = 'clue-tile revealed';
}

// Doing some basic event delegation for click events on the game board
function boardClickHandler(event) {
  var clickedEl = event.target;
  var tagName = clickedEl.tagName;

  if (tagName !== 'LI' && tagName !== 'SPAN') return;

  var el = clickedEl;
  if (tagName === 'SPAN') {
    el = clickedEl.parentNode;
  }

  var classList = el.classList;
  //console.log(el);

  if (classList.contains("show-amount")) {
    clickAmount(el);
  }
  //else if ((classList.contains("show-clueAndAnswer"))){ 
    //console.log(el.show)

  //  clickClue(el);
    //else if (classList.contains("btn btn-info btn-lg btn-block")) {
    //clickClue(el);
    
  //}
  else if (classList.contains("show-answer")) {
    clickAnswer(el);
  }

  $(document).off('click').on('click', 'button', function() {
     if ($(this).is('#correct')){

    var clueValue = $(this).closest(".clue-tile").find(".amount").html();
    clueValue = Number(clueValue.slice(1));

      totalMoney.push(clueValue);
      clickAnswer(el);
    }
      else {
        clickAnswer(el);
      }
   
});
}

// function clickReset(event) {
//   event.preventDefault();
//   localStorage.removeItem(LOCAL_STORAGE_KEY);
//   document.location.reload();
// }

//------------------------------------------------------------------------------
// Init
//------------------------------------------------------------------------------

function init() {
  

  var boardEl = document.getElementById("board");
  var resetEl = document.getElementById("reset");

 
  boardEl.addEventListener('click', boardClickHandler);

  //resetEl.addEventListener('click', clickReset);
}

window.onload = init;


</script>

</body>
</html>